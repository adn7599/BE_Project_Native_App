import React,{ useRef } from 'react';
import {NavigationContainer} from '@react-navigation/native';
import {Icon} from 'native-base';
import { createStackNavigator,} from '@react-navigation/stack';
import { createDrawerNavigator,} from '@react-navigation/drawer';
import { Provider as PaperProvider } from 'react-native-paper';

//import DrawerNavigationView from './DrawerNavigationView';
import Context from './global/context';
import CartArray from './global/globalCartArray';
import HomeScreen from './component/home';
import CartScreen from './component/cart';
import SelectProviderScreen from './component/cart/SelectProvider';
import RequestConfirmMsgScreen from './component/cart/RequestConfirmMsg';

//import {DrawerLayoutAndroid} from "react-native";


const Stack = createStackNavigator();
const Drawer = createDrawerNavigator();

function DrawerNavigation () {
  return (
      <Drawer.Navigator initialRouteName="Home">
        <Drawer.Screen name="Home" component={HomeScreen} />
      </Drawer.Navigator>
  );
}

const StackNavigation = () =>{
  return(
    
    <NavigationContainer>
      <Stack.Navigator initialRouteName="HomeScreen">
        <Stack.Screen 
         name ="Home"
         component={DrawerNavigation}
         options={({ navigation }) => ({
          headerShown : false, 
          headerLeft: (props) => (
            <Icon
              {...props}
              onPress= {() => navigation.openDrawer()}
              name= "md-menu"
              style={{fontSize: 35, color: 'red', padding:20}}/>
          ),
          headerRight: (props) => (
            <Icon
              {...props}
              onPress= {() => navigation.navigate('Cart')}
              name= "cart"
              style={{fontSize: 35, color: 'red', padding:20}}/>
          ),
        })}
        />
        <Stack.Screen
          name="Home1"
          component={HomeScreen}
          options={({ navigation }) => ({
            headerTitleAlign: 'center',
            headerShown : false, 
            headerLeft: (props) => (
              <Icon
                {...props}
                onPress= {() => navigation.openDrawer()}
                name= "md-menu"
                style={{fontSize: 35, color: 'red', padding:20}}/>
            ),
            headerRight: (props) => (
              <Icon
                {...props}
                onPress= {() => navigation.navigate('Cart')}
                name= "cart"
                style={{fontSize: 35, color: 'red', padding:20}}/>
            ),
          })}
        />
        <Stack.Screen
          name="Cart"
          component={CartScreen}
          options={({ navigation }) => ({
            headerTitleAlign: 'center',
            //headerShown : false, 
            headerLeft: (props) => (
              <Icon
                {...props}
                onPress= {() => navigation.openDrawer()}
                name= "md-menu"
                style={{fontSize: 35, color: 'red', padding:20}}/>
            ),
          })}
        />
        <Stack.Screen 
        name="SelectProvider"
        component={SelectProviderScreen}
        />
        <Stack.Screen 
        name="RequestConfirmMsg"
        component={RequestConfirmMsgScreen}
        />
      </Stack.Navigator>
    </NavigationContainer>
  
  );
}

const App = () =>{
  /*function SideBar(props){
    return(
      <NavigationContainer>
      <Drawer.Navigator initialRouteName="Home">
        <Drawer.Screen name="Home" component={HomeScreen} />
      </Drawer.Navigator>
    </NavigationContainer>
    );
  };
  function menu(props){
    return(
      <Icon
        {...props}
        onPress= {() => {alert('You have click menu')}}
        name= "md-menu"
        style={{fontSize: 35, color: 'red', padding:20}}/>
    );
  };*/

  const cartArray = CartArray();

  return (
    <Context.Provider value={cartArray}>
      <PaperProvider>
        <StackNavigation />
      </PaperProvider>
    </Context.Provider>
  );
};


export default App;